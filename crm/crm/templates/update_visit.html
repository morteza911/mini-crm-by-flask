{% extends 'base_generic.html' %}

{% block content %}
<div class="container mt-3">
    <h2 class="text-center">بروزرسانی بازدید</h2>
    
    <!-- فرم بروزرسانی بازدید -->
    <form class="form" action="{{ url_for('update_visit', visit_id=visit.id) }}" method="POST">
        {{ form.hidden_tag() }} <!-- توکن CSRF و فیلدهای پنهان -->

        <!-- تاریخ بازدید -->
        <div class="form-group">
            <label for="visit_date">تاریخ بازدید</label>
            {{ form.visit_date(class="form-control", placeholder="تاریخ بازدید") }}
            {% if form.visit_date.errors %}
                <div class="text-danger">
                    {% for error in form.visit_date.errors %}
                        <p>{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}
        </div>

        <!-- مذاکره مرتبط -->
        <div class="form-group">
            <label for="negotiation_id">مذاکره مرتبط</label>
            {{ form.negotiation_id(class="form-control", placeholder="مذاکره") }}
            {% if form.negotiation_id.errors %}
                <div class="text-danger">
                    {% for error in form.negotiation_id.errors %}
                        <p>{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}
        </div>

        <!-- دکمه‌های ارسال و انصراف -->
        <div class="mt-3">
            <button type="submit" class="btn btn-primary">بروزرسانی</button>
            <a href="{{ url_for('create_visit') }}" class="btn btn-secondary">انصراف</a>
        </div>
    </form>
</div>
{% endblock %}
